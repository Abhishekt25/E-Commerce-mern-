import{r as h,u as b,j as e,L as i}from"./index-xEdn3KMq.js";import{u as f}from"./index.esm-BRLb5Qrt.js";const N=({onLoginSuccess:l})=>{const[a,m]=h.useState(null),{register:n,handleSubmit:c,formState:{errors:s}}=f(),o=b(),d="https://e-commerce-mern-backend-ls42.onrender.com",u=async x=>{try{const t=await fetch(`${d}/api/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!t.ok)throw new Error("Login failed. Please check credentials.");const p=await t.json(),{token:g,user:r}=p;localStorage.setItem("token",g),localStorage.setItem("userName",r.name),localStorage.setItem("userRole",r.role),l?.(r),r.role==="admin"?o("/admin"):o("/")}catch(t){m(t.message||"An error occurred. Try again.")}};return e.jsxs("div",{className:"max-w-md mx-auto mt-20 p-6 bg-white shadow-lg rounded-2xl",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6 text-center",children:"Sign In"}),a&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:a}),e.jsxs("form",{onSubmit:c(u),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Email"}),e.jsx("input",{type:"email",...n("email",{required:"Email is required"}),className:"w-full mt-1 px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-400"}),s.email&&e.jsx("span",{className:"text-red-500 text-sm",children:s.email?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Password"}),e.jsx("input",{type:"password",...n("password",{required:"Password is required"}),className:"w-full mt-1 px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-400"}),s.password&&e.jsx("span",{className:"text-red-500 text-sm",children:s.password?.message})]}),e.jsx("div",{className:"text-right",children:e.jsx(i,{to:"/forgot-password",className:"text-blue-500 text-sm hover:underline",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition",children:"Sign In"})]}),e.jsxs("p",{className:"text-center text-gray-600 mt-4",children:["Donâ€™t have an account?"," ",e.jsx(i,{to:"/register",className:"text-blue-500 font-medium hover:underline",children:"Sign Up"})]})]})};export{N as default};
