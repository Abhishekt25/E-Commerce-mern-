import{j as e,r as u}from"./index-DpFv3ALu.js";const se=()=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})]})}),te=({error:a})=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading products"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a})]})]})})}),re=({selectedCount:a,onBulkAction:d})=>a===0?null:e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-blue-50 rounded-lg mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[a," product",a!==1?"s":""," selected"]}),e.jsxs("select",{onChange:r=>d(r.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Bulk actions"}),e.jsx("option",{value:"trash",children:"Move to trash"})]}),e.jsx("button",{onClick:()=>d("trash"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Apply"})]}),ae=({searchTerm:a,onSearchChange:d,stockFilter:r,onStockFilterChange:i,itemsPerPage:c,onItemsPerPageChange:n})=>e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search products by name, SKU, or slug...",value:a,onChange:o=>d(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("select",{value:r,onChange:o=>i(o.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All stock status"}),e.jsx("option",{value:"in_stock",children:"In stock"}),e.jsx("option",{value:"out_of_stock",children:"Out of stock"}),e.jsx("option",{value:"low_stock",children:"Low stock"})]}),e.jsxs("select",{value:c,onChange:o=>n(Number(o.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"5",children:"5 per page"}),e.jsx("option",{value:"10",children:"10 per page"}),e.jsx("option",{value:"20",children:"20 per page"}),e.jsx("option",{value:"50",children:"50 per page"})]})]}),ne=a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),T=a=>a===0?{text:"Out of stock",class:"bg-red-100 text-red-800"}:a<10?{text:"Low stock",class:"bg-yellow-100 text-yellow-800"}:{text:"In stock",class:"bg-green-100 text-green-800"},U=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),le=({isOpen:a,onClose:d,onSubmit:r,product:i,mode:c})=>{const[n,o]=u.useState({product:"",slug:"",sku:"",stock:0,price:0,categories:"",description:"",shortDescription:"",tags:"",image:null});u.useEffect(()=>{if(n.product&&c==="add"){const s=ne(n.product);o(j=>({...j,slug:s}))}},[n.product,c]),u.useEffect(()=>{a?c==="edit"&&i?o({product:i.product,slug:i.slug,sku:i.sku,stock:i.stock,price:i.price,categories:i.categories.join(", "),description:i.description,shortDescription:i.shortDescription,tags:i.tags.join(", "),image:null}):c==="add"&&o({product:"",slug:"",sku:"",stock:0,price:0,categories:"",description:"",shortDescription:"",tags:"",image:null}):o({product:"",slug:"",sku:"",stock:0,price:0,categories:"",description:"",shortDescription:"",tags:"",image:null})},[a,c,i]);const p=s=>{s.preventDefault(),r(n)},l=()=>{const s=document.querySelector('input[type="file"]');s&&(s.value="")},h=()=>{o({product:"",slug:"",sku:"",stock:0,price:0,categories:"",description:"",shortDescription:"",tags:"",image:null}),l(),d()};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:c==="add"?"Add New Product":"Edit Product"}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Enter product name",value:n.product,onChange:s=>o({...n,product:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Auto-generated slug",value:n.slug,onChange:s=>o({...n,slug:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c==="add"?"Slug will be auto-generated from product name":"You can customize the slug"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Enter SKU",value:n.sku,onChange:s=>o({...n,sku:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock *"}),e.jsx("input",{type:"number",required:!0,min:"0",placeholder:"Enter stock quantity",value:n.stock,onChange:s=>o({...n,stock:parseInt(s.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",placeholder:"Enter price",value:n.price,onChange:s=>o({...n,price:parseFloat(s.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),e.jsx("input",{type:"text",placeholder:"Enter categories (comma separated)",value:n.categories,onChange:s=>o({...n,categories:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple categories with commas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),e.jsx("textarea",{placeholder:"Enter a brief description (max 200 characters)",value:n.shortDescription,onChange:s=>o({...n,shortDescription:s.target.value}),rows:3,maxLength:200,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.shortDescription.length,"/200 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description"}),e.jsx("textarea",{placeholder:"Enter full product description",value:n.description,onChange:s=>o({...n,description:s.target.value}),rows:5,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),e.jsx("input",{type:"text",placeholder:"Enter tags (comma separated)",value:n.tags,onChange:s=>o({...n,tags:s.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple tags with commas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>o({...n,image:s.target.files?.[0]||null}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),c==="edit"&&i?.image&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current image: ",i.image]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:c==="add"?"Add Product":"Update Product"})]})]})]})})}):null},oe=({products:a,selectedProducts:d,onToggleSelect:r,onToggleSelectAll:i,onEdit:c,onDelete:n,onView:o})=>{const p=a.length>0&&d.length===a.length;return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"w-12 px-6 py-3",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:p,onChange:i})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categories"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Added"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v1M9 7h6"})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No products found"})]})})}):a.map(l=>{const h=T(l.stock),s=d.includes(l._id);return e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors duration-150 ${s?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:s,onChange:()=>r(l._id)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[l.image?e.jsx("img",{src:`https://e-commerce-mern-backend-ls42.onrender.com/uploads/${l.image}`,alt:l.product,className:"w-10 h-10 rounded-lg object-cover bg-gray-100",onError:j=>{const f=j.target;f.style.display="none"}}):e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-500",children:"ðŸ“¦"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.product}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Slug: ",l.slug]}),l.shortDescription&&e.jsx("p",{className:"text-xs text-gray-500 truncate mt-1",children:l.shortDescription})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded",children:l.sku})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h.class}`,children:[h.text,l.stock>0&&` (${l.stock})`]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",l.price.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:l.categories&&l.categories.length>0&&Array.isArray(l.categories)?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.categories.slice(0,3).map((j,f)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:j.trim()},f)),l.categories.length>3&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600",children:["+",l.categories.length-3," more"]})]}):e.jsx("span",{className:"text-xs text-gray-500",children:"No categories"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:U(l.createdAt)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(l),className:"text-green-600 hover:text-green-900 transition-colors duration-200",title:"View product",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>c(l),className:"text-blue-600 hover:text-blue-900 transition-colors duration-200",title:"Edit product",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>n(l._id),className:"text-red-600 hover:text-red-900 transition-colors duration-200",title:"Delete product",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},l._id)})})]})})})},ce=({currentPage:a,totalPages:d,totalItems:r,startIndex:i,endIndex:c,onPageChange:n,onNext:o,onPrevious:p})=>d<=1?null:e.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:i+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(c,r)})," of ",e.jsx("span",{className:"font-medium",children:r})," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:p,disabled:a===1,className:`px-3 py-1 rounded-md text-sm font-medium ${a===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:"Previous"}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,d)},(l,h)=>{let s;return d<=5||a<=3?s=h+1:a>=d-2?s=d-4+h:s=a-2+h,e.jsx("button",{onClick:()=>n(s),className:`px-3 py-1 rounded-md text-sm font-medium ${a===s?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:s},s)})}),e.jsx("button",{onClick:o,disabled:a===d,className:`px-3 py-1 rounded-md text-sm font-medium ${a===d?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:"Next"})]})]})}),ie=({isOpen:a,onClose:d,product:r})=>{if(!a||!r)return null;const i=T(r.stock);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Details"}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{children:r.image?e.jsx("img",{src:`https://e-commerce-mern-backend-ls42.onrender.com/uploads/${r.image}`,alt:r.product,className:"w-full h-80 object-cover rounded-lg bg-gray-100"}):e.jsx("div",{className:"w-full h-80 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-4xl text-gray-400",children:"ðŸ“¦"})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.product}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Slug: ",r.slug]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"SKU"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:r.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Stock"}),e.jsx("p",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.class}`,children:[i.text," (",r.stock,")"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Price"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:["$",r.price.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1 capitalize",children:r.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Categories"}),r.categories&&r.categories.length>0&&Array.isArray(r.categories)?e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.categories.map((c,n)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:typeof c=="string"?c.trim():String(c)},n))}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No categories"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tags"}),r.tags&&r.tags.length>0&&Array.isArray(r.tags)?e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.tags.map((c,n)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:typeof c=="string"?c.trim():String(c)},n))}):e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No tags"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date Added"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:U(r.createdAt)})]})]})]}),e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Description"}),r.shortDescription&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Short Description"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.shortDescription})]}),r.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Full Description"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 whitespace-pre-line",children:r.description})]}),!r.shortDescription&&!r.description&&e.jsx("p",{className:"text-sm text-gray-500",children:"No description available"})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"Close"})})]})})})},me=()=>{const[a,d]=u.useState([]),[r,i]=u.useState(!0),[c,n]=u.useState(null),[o,p]=u.useState([]),[l,h]=u.useState(""),[s,j]=u.useState("all"),[f,N]=u.useState(1),[v,F]=u.useState(10),[R,C]=u.useState(!1),[A,P]=u.useState(null),[y,M]=u.useState("add"),[V,_]=u.useState(null),[z,D]=u.useState(!1);u.useEffect(()=>{k()},[]);const k=async()=>{try{const x=await fetch("https://e-commerce-mern-backend-ls42.onrender.com/api/products");if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const b=await x.json();d(b),i(!1)}catch(t){console.error("Error fetching products:",t),n(t instanceof Error?t.message:"Unknown error"),i(!1)}},$=a.filter(t=>{const x=t.product.toLowerCase().includes(l.toLowerCase())||t.sku.toLowerCase().includes(l.toLowerCase())||t.slug.toLowerCase().includes(l.toLowerCase()),b=s==="all"||s==="in_stock"&&t.stock>0||s==="out_of_stock"&&t.stock===0||s==="low_stock"&&t.stock>0&&t.stock<10;return x&&b}),w=$.length,E=Math.ceil(w/v),S=(f-1)*v,L=S+v,B=$.slice(S,L);u.useEffect(()=>{N(1)},[l,s]);const O=t=>{p(x=>x.includes(t)?x.filter(b=>b!==t):[...x,t])},q=()=>{const t=B.map(x=>x._id);p(o.length===t.length?[]:t)},W=t=>{t>=1&&t<=E&&N(t)},H=()=>{f<E&&N(f+1)},K=()=>{f>1&&N(f-1)},J=t=>{_(t),D(!0)},Y=async t=>{const x=t.categories.split(",").map(g=>g.trim()).filter(g=>g.length>0),b=t.tags.split(",").map(g=>g.trim()).filter(g=>g.length>0),m=new FormData;m.append("product",t.product),m.append("slug",t.slug),m.append("sku",t.sku),m.append("stock",t.stock.toString()),m.append("price",t.price.toString()),m.append("categories",JSON.stringify(x)),m.append("description",t.description),m.append("shortDescription",t.shortDescription),m.append("tags",JSON.stringify(b)),m.append("status","active"),t.image&&m.append("image",t.image);try{const g="https://e-commerce-mern-backend-ls42.onrender.com",ee=y==="add"?`${g}/api/products`:`${g}/api/products/${A._id}`;if((await fetch(ee,{method:y==="add"?"POST":"PUT",body:m})).ok)await k(),I();else throw new Error(`Failed to ${y} product`)}catch(g){console.error(`Error ${y}ing product:`,g),alert(`Error ${y}ing product. Please try again.`)}},G=async t=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{if((await fetch(`https://e-commerce-mern-backend-ls42.onrender.com/api/products/${t}`,{method:"DELETE"})).ok)await k(),p(m=>m.filter(g=>g!==t));else throw new Error("Failed to delete product")}catch(x){console.error("Error deleting product:",x),alert("Error deleting product. Please try again.")}},Q=async t=>{if(t==="trash"&&o.length>0&&confirm(`Move ${o.length} product(s) to trash?`))try{const x="https://e-commerce-mern-backend-ls42.onrender.com";await Promise.all(o.map(b=>fetch(`${x}/api/products/${b}`,{method:"DELETE"}))),await k(),p([])}catch(x){console.error("Error deleting products:",x),alert("Error deleting products. Please try again.")}},X=()=>{M("add"),P(null),C(!0)},Z=t=>{M("edit"),P(t),C(!0)},I=()=>{C(!1),P(null)};return r?e.jsx(se,{}):c?e.jsx(te,{error:c}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",S+1,"-",Math.min(L,w)," of ",w," products"]})]}),e.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:"Add Product"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx(re,{selectedCount:o.length,onBulkAction:Q}),e.jsx(ae,{searchTerm:l,onSearchChange:h,stockFilter:s,onStockFilterChange:j,itemsPerPage:v,onItemsPerPageChange:F})]}),e.jsx(oe,{products:B,selectedProducts:o,onToggleSelect:O,onToggleSelectAll:q,onEdit:Z,onDelete:G,onView:J}),e.jsx(ce,{currentPage:f,totalPages:E,totalItems:w,startIndex:S,endIndex:L,onPageChange:W,onNext:H,onPrevious:K}),e.jsx(le,{isOpen:R,onClose:I,onSubmit:Y,product:A,mode:y}),e.jsx(ie,{isOpen:z,onClose:()=>{D(!1),_(null)},product:V})]})};export{me as default};
