import{r as m,j as e}from"./index-BVfFyKWL.js";const k=()=>{const[t,l]=m.useState({product:"",sku:"",stock:"",price:"",status:"In Stock",variants:"",marketplaces:{amazon:!1,flipkart:!1}}),[d,u]=m.useState(null),n=p=>{const a=p.target;if(a instanceof HTMLInputElement){const{name:s,value:c,type:o}=a;if(o==="checkbox"){const r=a.checked;l(i=>({...i,marketplaces:{...i.marketplaces,[s]:r}}))}else if(o==="file"){const r=a.files?.[0];r&&u(r)}else l(r=>({...r,[s]:c}))}else if(a instanceof HTMLSelectElement){const{name:s,value:c}=a;l(o=>({...o,[s]:c}))}},f=async p=>{p.preventDefault();const a=new FormData;a.append("product",t.product),a.append("sku",t.sku),a.append("stock",t.stock),a.append("price",t.price),a.append("status",t.status),a.append("variants",t.variants),a.append("marketplaces",JSON.stringify(t.marketplaces)),d&&a.append("image",d);try{const s=await fetch("https://e-commerce-mern-backend-ls42.onrender.com/api/products",{method:"POST",credentials:"include",body:a});console.log("Response status:",s.status);const c=await s.text();console.log("Raw response:",c);let o;try{o=JSON.parse(c)}catch{o={message:"Invalid JSON response from server"}}if(s.ok){alert("Product Added"),l({product:"",sku:"",stock:"",price:"",status:"In Stock",variants:"",marketplaces:{amazon:!1,flipkart:!1}}),u(null);const r=document.querySelector('input[type="file"]');r&&(r.value="")}else alert(`Error: ${o.message}`)}catch(s){console.error("Error submitting form:",s),alert("Error adding product")}};return e.jsxs("form",{onSubmit:f,className:"p-4 bg-white rounded shadow max-w-lg space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add Product"}),e.jsx("input",{name:"product",value:t.product,onChange:n,placeholder:"Product Name",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"sku",value:t.sku,onChange:n,placeholder:"SKU",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"stock",value:t.stock,onChange:n,placeholder:"Stock",type:"number",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"price",value:t.price,onChange:n,placeholder:"Price",className:"w-full p-2 border rounded"}),e.jsxs("select",{name:"status",value:t.status,onChange:n,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"In Stock",children:"In Stock"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),e.jsx("input",{name:"variants",value:t.variants,onChange:n,placeholder:"Variants (comma separated)",className:"w-full p-2 border rounded"}),e.jsx("input",{type:"file",accept:"image/*",name:"image",onChange:n,className:"w-full p-2 border rounded"}),e.jsxs("div",{className:"space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"amazon",checked:t.marketplaces.amazon,onChange:n})," Amazon"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"flipkart",checked:t.marketplaces.flipkart,onChange:n})," Flipkart"]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Add Product"})]})};export{k as default};
