import{r as m,j as e}from"./index-DkpZMqcO.js";const k=()=>{const[t,l]=m.useState({product:"",sku:"",stock:"",price:"",status:"In Stock",variants:"",marketplaces:{amazon:!1,flipkart:!1}}),[d,u]=m.useState(null),s=p=>{const a=p.target;if(a instanceof HTMLInputElement){const{name:n,value:r,type:o}=a;if(o==="checkbox"){const c=a.checked;l(i=>({...i,marketplaces:{...i.marketplaces,[n]:c}}))}else if(o==="file"){const c=a.files?.[0];c&&u(c)}else l(c=>({...c,[n]:r}))}else if(a instanceof HTMLSelectElement){const{name:n,value:r}=a;l(o=>({...o,[n]:r}))}},f=async p=>{p.preventDefault();const a=new FormData;a.append("product",t.product),a.append("sku",t.sku),a.append("stock",t.stock),a.append("price",t.price),a.append("status",t.status),a.append("variants",t.variants),a.append("marketplaces",JSON.stringify(t.marketplaces)),d&&a.append("image",d);try{const n=await fetch("http://localhost:2507/api/products",{method:"POST",credentials:"include",body:a}),r=await n.json();if(n.ok){alert("Product Added"),l({product:"",sku:"",stock:"",price:"",status:"In Stock",variants:"",marketplaces:{amazon:!1,flipkart:!1}}),u(null);const o=document.querySelector('input[type="file"]');o&&(o.value="")}else alert(`Error: ${r.message}`);console.log(r)}catch(n){console.error("Error submitting form:",n),alert("Error adding product")}};return e.jsxs("form",{onSubmit:f,className:"p-4 bg-white rounded shadow max-w-lg space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add Product"}),e.jsx("input",{name:"product",value:t.product,onChange:s,placeholder:"Product Name",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"sku",value:t.sku,onChange:s,placeholder:"SKU",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"stock",value:t.stock,onChange:s,placeholder:"Stock",type:"number",className:"w-full p-2 border rounded"}),e.jsx("input",{name:"price",value:t.price,onChange:s,placeholder:"Price",className:"w-full p-2 border rounded"}),e.jsxs("select",{name:"status",value:t.status,onChange:s,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"In Stock",children:"In Stock"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),e.jsx("input",{name:"variants",value:t.variants,onChange:s,placeholder:"Variants (comma separated)",className:"w-full p-2 border rounded"}),e.jsx("input",{type:"file",accept:"image/*",name:"image",onChange:s,className:"w-full p-2 border rounded"}),e.jsxs("div",{className:"space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"amazon",checked:t.marketplaces.amazon,onChange:s})," Amazon"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"flipkart",checked:t.marketplaces.flipkart,onChange:s})," Flipkart"]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Add Product"})]})};export{k as default};
