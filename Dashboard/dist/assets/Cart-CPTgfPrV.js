import{r as g,j as e,L as o}from"./index-DiYmiu-Q.js";const u=()=>{const[l,c]=g.useState([]),i="https://e-commerce-mern-backend-ls42.onrender.com";g.useEffect(()=>{const t=JSON.parse(localStorage.getItem("cart")||"[]"),s=async()=>{try{const r=t.map(async a=>({...await(await fetch(`${i}/api/products/${a._id}`)).json(),quantity:a.quantity})),n=await Promise.all(r);c(n)}catch(r){console.error("Error loading cart products:",r)}};t.length>0&&s()},[i]);const d=(t,s)=>{if(s<1)return;const r=l.map(a=>a._id===t?{...a,quantity:s}:a);c(r);const n=r.map(({_id:a,quantity:m})=>({_id:a,quantity:m}));localStorage.setItem("cart",JSON.stringify(n)),window.dispatchEvent(new Event("cartUpdated"))},h=t=>{const s=l.filter(n=>n._id!==t);c(s);const r=s.map(({_id:n,quantity:a})=>({_id:n,quantity:a}));localStorage.setItem("cart",JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))},x=l.reduce((t,s)=>t+s.price*s.quantity,0);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-white min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Shopping Cart"}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Your cart is empty"}),e.jsx(o,{to:"/products",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-2/3",children:l.map(t=>e.jsx("div",{className:"border-b border-gray-200 py-6 last:border-b-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:t.image?e.jsx("img",{src:`${i}/uploads/${t.image}`,alt:t.product,className:"w-20 h-20 rounded-lg object-cover"}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 text-sm",children:"No Image"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:t.product}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>d(t._id,t.quantity-1),className:"px-3 py-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors",children:"-"}),e.jsx("span",{className:"px-3 py-1 font-medium min-w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:()=>d(t._id,t.quantity+1),className:"px-3 py-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-colors",children:"+"})]}),e.jsx("button",{onClick:()=>h(t._id),className:"text-red-600 hover:text-red-800 text-sm font-medium ml-4",children:"Remove"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-lg text-gray-900",children:["$",(t.price*t.quantity).toFixed(2)]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["$",t.price," each"]})]})]})},t._id))}),e.jsx("div",{className:"lg:w-1/3",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",x.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",x.toFixed(2)]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{to:"/checkout",className:"block w-full bg-green-600 text-white text-center py-3 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Checkout"}),e.jsx(o,{to:"/products",className:"block w-full border border-gray-300 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Continue Shopping"})]})]})})]})]})};export{u as default};
