import{r as a,j as e,L as c}from"./index-xEdn3KMq.js";const S=()=>{const[r,d]=a.useState(!1),[m,p]=a.useState(""),[n,b]=a.useState([]),[i]=a.useState(10),t="https://e-commerce-mern-backend-ls42.onrender.com";a.useEffect(()=>{const s=localStorage.getItem("token"),l=localStorage.getItem("userName"),h=localStorage.getItem("userRole");s&&h==="user"?(d(!0),p(`${l||"User"}@example.com`)):d(!1);const g=JSON.parse(localStorage.getItem("cart")||"[]"),j=async()=>{try{const o=g.map(async x=>({...await(await fetch(`${t}/api/products/${x._id}`)).json(),quantity:x.quantity})),y=await Promise.all(o);b(y)}catch(o){console.error("Error loading cart products:",o)}};g.length>0&&j()},[t]);const u=n.reduce((s,l)=>s+l.price*l.quantity,0),f=u+i;return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-white min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Checkout"}),!r&&e.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 text-yellow-800 p-4 rounded-lg mb-6 text-center",children:["Please ",e.jsx(c,{to:"/login",className:"text-blue-600 underline",children:"login"})," or ",e.jsx(c,{to:"/signup",className:"text-blue-600 underline",children:"sign up"})," to continue checkout."]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-2/3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Shipping Address"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"First Name"}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Last Name"})]}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email Address",type:"email",value:r?m:"",readOnly:r}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City"}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"State"}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ZIP Code"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payment Details"}),e.jsxs("form",{className:"space-y-4",children:[e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Card Number"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MM/YY"}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"CVV"})]}),e.jsx("input",{className:"border border-gray-300 w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Name on Card"})]})]})]}),e.jsx("div",{className:"lg:w-1/3",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),e.jsx("div",{className:"space-y-4 mb-6",children:n.map(s=>e.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-4 last:border-b-0",children:[s.image?e.jsx("img",{src:`${t}/uploads/${s.image}`,alt:s.product,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500 text-xs",children:"No Image"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-medium text-sm",children:s.product}),e.jsxs("p",{className:"text-gray-600 text-xs",children:["Qty: ",s.quantity]})]}),e.jsxs("p",{className:"font-semibold text-sm",children:["$",(s.price*s.quantity).toFixed(2)]})]},s._id))}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",u.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["$",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Taxes"}),e.jsx("span",{className:"text-sm",children:"Calculated at checkout"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",f.toFixed(2)]})]})})]}),e.jsx("button",{className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${r?"bg-green-600 text-white hover:bg-green-700":"bg-gray-400 text-gray-700 cursor-not-allowed"}`,disabled:!r,children:r?"Place Order":"Please Login to Checkout"}),e.jsx(c,{to:"/cart",className:"block w-full border border-gray-300 text-gray-700 text-center py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors font-medium mt-3",children:"Back to Cart"})]})})]})]})};export{S as default};
