import{r as a,u as f,j as t}from"./index-DAuQrUbm.js";const j=()=>{const[g,x]=a.useState([]),[w,i]=a.useState([]),[n,d]=a.useState(null),[h,l]=a.useState(null),c="https://e-commerce-mern-backend-ls42.onrender.com",u=f();a.useEffect(()=>{(async()=>{try{const s=await fetch(`${c}/api/products`);if(!s.ok)throw new Error("Failed to fetch products");const o=await s.json();x(o)}catch(s){console.error("Error fetching products:",s)}})();const r=JSON.parse(localStorage.getItem("cart")||"[]");i(r)},[c]);const b=e=>{const r=JSON.parse(localStorage.getItem("cart")||"[]"),s=r.find(o=>o._id===e._id);s?s.quantity+=1:r.push({_id:e._id,quantity:1}),localStorage.setItem("cart",JSON.stringify(r)),i(r),d({name:e.product,price:e.price}),l(e._id),setTimeout(()=>{l(null)},5e3),setTimeout(()=>{d(null)},5e3),window.dispatchEvent(new Event("cartUpdated"))},m=()=>{u("/cart")};return t.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[n&&t.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-800 px-4 py-3 rounded-lg mb-4 flex justify-between items-center",children:[t.jsxs("span",{children:["ðŸ›’ ",t.jsx("strong",{children:n.name})," ($",n.price,") added to cart"]}),t.jsx("button",{onClick:m,className:"bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700",children:"View Cart"})]}),t.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Products"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:g.map(e=>t.jsxs("div",{className:"border rounded-2xl shadow-md p-4 flex flex-col items-center text-center bg-white",children:[e.image?t.jsx("img",{src:`${c}/uploads/${e.image}`,alt:e.product,className:"w-48 h-48 object-cover mb-4 rounded-lg"}):t.jsx("div",{className:"w-48 h-48 bg-gray-200 mb-4 flex items-center justify-center rounded-lg",children:"No Image"}),t.jsx("h2",{className:"text-lg font-medium",children:e.product}),t.jsxs("p",{className:"text-gray-600 mt-1",children:["$",e.price]}),t.jsx("p",{className:`mt-2 text-sm font-semibold ${e.stock>0?"text-green-600":"text-red-600"}`,children:e.stock>0?"In Stock":"Out of Stock"}),t.jsx("button",{onClick:()=>b(e),disabled:e.stock<=0,className:`mt-4 w-full py-2 rounded-xl text-white ${e.stock>0?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:"Add to Cart"}),h===e._id&&t.jsx("button",{onClick:m,className:"mt-2 w-full py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white transition-all duration-300",children:"View Cart"})]},e._id))})]})};export{j as default};
